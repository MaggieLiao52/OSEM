if(!Date.now){Date.now=function(){return new Date().getTime()}}var i;var spokes=$(".osemSpoke");var type=$("#osemBar").attr("data-osem-type");var timeLoad=Date.now();$(".submitButtons").css("display","none");$(document).contextmenu(function(){return false});function saveToSoSci(b,a){var c=$("#"+a)[0];c.value=b}function saveClick(b,a,d){var c=Date.now()-timeLoad;var e=d+b;saveToSoSci(a,e+"_01");saveToSoSci(c,e+"_02");saveToSoSci(timeLoad,e+"_03")}function getCoords(b){for(i=0;i<b.length;i++){var c=b[i].getBoundingClientRect();var a;if(i<9){a="CO0"+(i+1)}else{a="CO"+(i+1)}saveToSoSci(c.top,a+"_01");saveToSoSci(c.right,a+"_02");saveToSoSci(c.bottom,a+"_03");saveToSoSci(c.left,a+"_04")}}var cursorPosition={X:0,Y:0,Time:0};var cursorInterval=100;var cursorCutOff=300;var cursorX=[0];var cursorY=[0];var cursorTime=[0];$(document).on("mousemove",function(a){cursorPosition.X=a.pageX;cursorPosition.Y=a.pageY});function getCursorPosition(a){a.Time=a.Time+cursorInterval;if(cursorX.slice(-1)[0]!=a.X||cursorY.slice(-1)[0]!=a.Y){cursorX.push(a.X);cursorY.push(a.Y);cursorTime.push(a.Time)}if(cursorX.length>cursorCutOff){window.clearInterval(updateCursorPosition)}}if(type==="hub"){var updateCursorPosition=setInterval(function(){getCursorPosition(cursorPosition)},cursorInterval)}function getSelectionId(a){var b;if(a<10){b="0"+a}else{b=""+a}return b}function saveCursor(a){var b="MO"+a;saveToSoSci(cursorX.join(),b+"_01");saveToSoSci(cursorY.join(),b+"_02");saveToSoSci(cursorTime.join(),b+"_03")}if(endClicks<counter){saveToSoSci(1,"OS01_05");SoSciTools.submitPage()}var displayTimer=setInterval(function(){timerUpdate(endTime)},250);function timerUpdate(b){var a=b-Math.floor(Date.now()/1000);$("#osemBar .timerDisplay").text(a);if(a<0){window.clearInterval(displayTimer);var c=getSelectionId(counter);var d;if(type==="spoke"){d="DT";saveClick(c,osemId,d)}else{d="CL";saveClick(c,osemId,d)}saveToSoSci(1,"OS01_05");SoSciTools.submitPage()}}$(".osemAbort").click(function(){var a=getSelectionId(counter);var b;if(type==="spoke"){b="DT";saveClick(a,osemId,b)}else{b="CL";saveClick(a,osemId,b)}saveToSoSci(1,"OS01_05");saveToSoSci(1,"OS03_01");SoSciTools.submitPage()});if(counter==1){getCoords(spokes);saveToSoSci($(window).width(),"OS02_01");saveToSoSci($(window).height(),"OS02_02")}$(".osemClickable").mouseup(function(){var b=getSelectionId(counter);var c;if(type==="hub"){saveToSoSci(counter,"OS01_01");var d=$(this).closest(".osemSpoke");var a=d.attr("data-osem-spoke");c="CL";saveClick(b,a,c);saveToSoSci(a,"OS01_02");saveCursor(b)}if(type==="spoke"){c="DT";saveClick(b,osemId,c);saveToSoSci(0,"OS01_02")}SoSciTools.submitPage()});